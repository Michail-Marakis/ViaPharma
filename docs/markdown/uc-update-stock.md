**Ενημέρωση αποθεμάτων**:



**Πρωτεύον Actor**: Διαχειριστής φαρμακαποθήκης



**Ενδιαφερόμενοι**:

*Διαχειριστής φαρμακαποθήκης*: Θέλει να ενημερώνει τα αποθέματα κάθε φορά που παραλαμβάνει νέες παρτίδες προϊόντων.

*Φαρμακοποιός*: Θέλει να εκτελούνται αυτόματα οι αναδρομικές παραγγελίες (backorders) όταν τα αποθέματα επαρκούν.

*Αποθήκη*: Θέλει οι παρτίδες προϊόντων που παραδίδει να καταγράφονται σωστά στα αποθέματα.



**Προϋποθέσεις**:

Ο διαχειριστής έχει συνδεθεί στο σύστημα της φαρμακαποθήκης.

Η φαρμακαποθήκη έχει παραλάβει νέες παρτίδες προϊόντων από εισαγωγέα ή φαρμακοβιομηχανία.



**Βασική ροή**:

Ο διαχειριστής επιλέγει τη λειτουργία ενημέρωσης αποθεμάτων.



Ο διαχειριστής καταχωρίζει τα στοιχεία της νέας παρτίδας (π.χ. κωδικός ΕΟΦ, παρτίδα, ποσότητα).



Το σύστημα ενημερώνει τα αποθέματα του προϊόντος με βάση τη νέα παρτίδα.



Μετά την παραλαβή της νέας παρτίδας, το σύστημα ενεργοποιεί τη διαδικασία εξυπηρέτησης μίας ή περισσότερων backorders για το συγκεκριμένο προϊόν.



Το σύστημα, με βάση τη σειρά άφιξης των backorders, ελέγχει για κάθε backorder αν τα αποθέματα επαρκούν για την πλήρη εξυπηρέτησή του.



Για κάθε backorder για το οποίο τα αποθέματα επαρκούν, το σύστημα εκτελεί την αναδρομική παραγγελία, μειώνει τα αποθέματα του προϊόντος και αποστέλλει ειδοποίηση με email προς τον αντίστοιχο φαρμακοποιό σχετικά με την εκτέλεση της παραγγελίας backorder.



Τα backorders για τα οποία τα αποθέματα δεν επαρκούν παραμένουν σε αναμονή.



**Εναλλακτικές ροές**:

Δεν υπάρχουν backorders για το συγκεκριμένο προϊόν.



Το σύστημα ενημερώνει ότι τα αποθέματα ενημερώθηκαν χωρίς να εκτελεστεί καμία αναδρομική παραγγελία.



Η περίπτωση χρήσης τερματίζεται.





!\[alt text](uml/requirements/activity-update-stock.png)
!\[alt text](uml/requirements/sequence-update-stock.png)

